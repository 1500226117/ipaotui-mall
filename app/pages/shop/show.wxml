<import src="templates/goods-actions.wxml"/>
<!--pages/shop/show.wxml-->
<view class="shop-show">
  <view class="shop-info weui-panel weui-panel_access">
    <view class="weui-panel__bd">
      <navigator url="" hover-class="" class="weui-media-box weui-media-box_appmsg">
        <view class="weui-media-box__hd weui-media-box__hd_in-appmsg">
          <image class="weui-media-box__thumb shop-info__pic" src="{{info.pic_url}}" />
        </view>
        <view class="weui-media-box__bd weui-media-box__bd_in-appmsg weui-cell__ft_in-access">
          <view class="weui-media-box__title">{{info.seller_name}}</view>
          <view class="weui-media-box__desc shop-info__desc">
            <view>
              {{info.min_price}}元起送 | {{info.delivery_fee}}元配送费 | {{info.reach_time}}分钟到达
            </view>
            <view wx:if="{{info.notice}}">
              公告: {{info.notice}}
            </view>
          </view>
        </view>
      </navigator>
      <view wx:if="{{info.promotion && info.promotion.length > 0}}" class="promotion">
        <swiper class="promotion-swiper" vertical="true" autoplay="true" interval="5000">
          <swiper-item wx:key="index" wx:for="{{info.promotion}}" class="promotion-item">
            <image class="promotion-item__icon" src="{{item.pic_url}}"></image>
            <text>{{item.info}}</text>
          </swiper-item>
        </swiper>
        <view class="promotion-total">
          {{info.promotion.length}}个活动
        </view>
      </view>
    </view>
  </view>
  <view class="shop-content">
    <view class=" weui-tab">
      <view class="weui-navbar">
        <block wx:for="{{tabs}}" wx:key="*this">
          <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ? 'weui-bar__item_on' : ''}}" bindtap="tabClick">
            <view class="weui-navbar__title">{{item}}</view>
          </view>
        </block>
        <view class="weui-navbar__slider" style="left: {{sliderLeft}}px; transform: translateX({{sliderOffset}}px); -webkit-transform: translateX({{sliderOffset}}px);"></view>
      </view>
      <view class="weui-tab__panel">
        <view class="weui-tab__content menu-tab weui-flex" hidden="{{activeIndex != 0}}">
          <view  class="menu-list">
            <view bindtap="menuClick" id="{{index}}" class="menu-item {{index == activeMenuIndex ? 'menu-item_active' : ''}} " wx:for="{{info.menus}}" wx:key="menu_id">
              {{item.menu_name}}
            </view>
          </view>
          <view wx:if="{{info.menus && info.menus[activeMenuIndex]}}" class="goods-list weui-flex__item">
            <view class="goods-list__label">
              {{info.menus[activeMenuIndex].menu_name}}
            </view>
            <view wx:for="{{info.menus[activeMenuIndex].goods2}}" wx:key="goods_id" class="goods-item weui-flex">
              <image class="goods-item__pic" src="{{item.pic_url}}"></image>
              <view class="weui-flex__item">
                <view class="goods-item__name">{{item.goods_name}}</view>
                <view class="goods-item__desc text-small grey-color">月售{{item.sales}}份</view>
                <view class="goods-item__price primary-color text-large">¥{{item.price}}</view>
                <view class="goods-item__actions">
                  <view wx:if="{{item.sub_goods && item.sub_goods.length > 0}}" class="goods-item__sub-goods">
                  选规格
                    <view wx:if="{{order['goodsNum'][item.goods_id] > 0}}" class="weui-badge goods-item__sub-goods-badge">{{order['goodsNum'][item.goods_id]}}</view>
                  </view>
                  <template is="goods-actions" data="{{menu_index: activeMenuIndex, goods_index: index, num: order['goodsNums'][item.goods_id]}}" wx:else />
                  
                </view>
              </view>
            </view>
          </view>
        </view>
        <view class="weui-tab__content" hidden="{{activeIndex != 1}}">选项二的内容</view>
      </view>
    </view>
  </view>
</view>